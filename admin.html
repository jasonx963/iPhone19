<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Admin</title><style>body{font-family:system-ui;margin:20px}table{border-collapse:collapse}td,th{border:1px solid #ddd;padding:6px}</style></head><body>
<h2>最近上传</h2>
<table id="t" style="display:none"><thead><tr><th>时间</th><th>订单ID</th><th>商品</th><th>文件</th></tr></thead><tbody id="tb"></tbody></table>
<pre id="out">loading...</pre>
<script>
(async () => {
  const r = await fetch('/api/payments-list?limit=50');
  const j = await r.json();
  if(!j.ok){ out.textContent = JSON.stringify(j,null,2); return; }
  out.style.display='none'; t.style.display='table';
  j.items.forEach(x => {
    const tr=document.createElement('tr');
    const isImg = x.mimetype && x.mimetype.startsWith('image/');
    tr.innerHTML = '<td>'+ (x.createdAt||'') +'</td><td>'+ (x.orderId||'') +'</td><td>'+ (x.product||'') +'</td><td>' +
      (isImg ? '<img style="max-width:120px" src="data:'+x.mimetype+';base64,'+x.dataBase64+'"/>' :
               '<a download="'+(x.filename||"comprobante")+'" href="data:'+(x.mimetype||"application/octet-stream")+';base64,'+x.dataBase64+'">'+(x.filename||"archivo")+'</a>')
      +'</td>';
    tb.appendChild(tr);
  });
})();
</script>
</body></html>